<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>电影收藏馆 | 路易斯酸的艺术寄托</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>电影收藏馆</h1>
            <p>已收藏 <span class="movie-count" id="movieCount">0</span> 部电影</p>
        </header>

        <main>
            <section class="card" style="animation-delay: 0.3s">
                <h2>
                    <svg viewBox="0 0 24 24">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"/>
                        <path d="M7 12h2v5H7zm4-7h2v12h-2zm4 4h2v8h-2z"/>
                    </svg>
                    CSV导入电影
                </h2>
                <div class="csv-upload">
                    <input type="file" id="fileInput" class="file-input" accept=".csv">
                    <label for="fileInput" class="btn btn-outline file-label">
                        <svg viewBox="0 0 24 24">
                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                        </svg>
                        选择CSV文件
                    </label>
                    <span id="fileName" class="file-name">未选择文件</span>
                    <button class="btn btn-primary" onclick="importCSV()">
                        <svg viewBox="0 0 24 24">
                            <path d="M5 20h14v-2H5v2zm0-10h4V6h6v4h4l-7 7-7-7z"/>
                        </svg>
                        开始导入
                    </button>
                </div>
                <small>支持格式：电影/电视剧/番组,个人评分,打分日期,我的短评,上映日期,制片国家,条目链接（UTF-8编码）</small>
            </section>

            <section class="card" style="animation-delay: 0.4s">
                <h2>
                    <svg viewBox="0 0 24 24">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                    添加新电影
                </h2>
                <form id="addMovieForm" onsubmit="return addMovie(event)">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="title">电影名称</label>
                            <input type="text" id="title" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="director">导演</label>
                            <input type="text" id="director" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="year">上映年份</label>
                            <input type="number" id="year" class="form-control" min="1900" max="2099">
                        </div>
                        <div class="form-group">
                            <label for="rating">个人评分（1-5）</label>
                            <input type="number" id="rating" class="form-control" min="0" max="10" step="0.1">
                        </div>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="ratingDate">打分日期</label>
                            <input type="date" id="ratingDate" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="country">制片国家/参评电影节</label>
                            <input type="text" id="country" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="link">条目链接</label>
                            <input type="url" id="link" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="coverUrl">海报URL</label>
                            <input type="url" id="coverUrl" class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="review">我的短评</label>
                        <textarea id="review" class="form-control" rows="3"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <svg viewBox="0 0 24 24">
                            <path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
                        </svg>
                        添加电影
                    </button>
                </form>
            </section>

            <section class="card" style="animation-delay: 0.5s">
                <h2>
                    <svg viewBox="0 0 24 24">
                        <path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8 12.5v-9l6 4.5-6 4.5z"/>
                    </svg>
                    我的电影收藏
                </h2>
                <div class="movie-actions-bar">
                    <div class="select-all-container">
                        <input type="checkbox" id="selectAll" class="checkbox-input">
                        <label for="selectAll">全选</label>
                    </div>
                    <button class="btn btn-outline" id="deleteSelectedBtn" style="display:none;">
                        <svg viewBox="0 0 24 24" width="14" height="14">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                        </svg>
                        删除选中
                    </button>
                </div>
                <div class="movie-list" id="movieList"></div>
                <div class="pagination" id="pagination">
                    <button class="btn btn-outline pagination-btn" id="prevPage" disabled>
                        <svg viewBox="0 0 24 24" width="14" height="14">
                            <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                        </svg>
                        上一页
                    </button>
                    <div class="pagination-info">
                        第 <span id="currentPage">1</span> 页，共 <span id="totalPages">1</span> 页
                    </div>
                    <div class="pagination-jump" style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="number" id="jumpPage" class="form-control" style="width: 60px; padding: 0.3rem;" min="1" placeholder="页码">
                        <button class="btn btn-outline pagination-btn" onclick="jumpToPage()" style="padding: 0.3rem 0.8rem;">
                            跳转
                        </button>
                    </div>
                    <button class="btn btn-outline pagination-btn" id="nextPage" disabled>
                        下一页
                        <svg viewBox="0 0 24 24" width="14" height="14">
                            <path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/>
                        </svg>
                    </button>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>更新于 <span id="currentDate"></span> | 本网页由段绪程独立编写，盗版必究 | 20223535@csutf.com</p>
        </footer>
    </div>
    
    <!-- 编辑电影模态框 -->
    <div class="modal-overlay" id="editMovieModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3 class="modal-title">编辑电影</h3>
                <button class="modal-close" onclick="closeEditModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editMovieForm">
                    <input type="hidden" id="editMovieId">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="editTitle">电影名称</label>
                            <input type="text" id="editTitle" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="editDirector">导演</label>
                            <input type="text" id="editDirector" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="editYear">上映年份</label>
                            <input type="number" id="editYear" class="form-control" min="1900" max="2099">
                        </div>
                        <div class="form-group">
                            <label for="editRating">个人评分（1-5）</label>
                            <input type="number" id="editRating" class="form-control" min="0" max="10" step="0.1">
                        </div>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="editRatingDate">打分日期</label>
                            <input type="date" id="editRatingDate" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="editCountry">制片国家/参评电影节</label>
                            <input type="text" id="editCountry" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="editLink">条目链接</label>
                            <input type="url" id="editLink" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="editCoverUrl">海报URL</label>
                            <input type="url" id="editCoverUrl" class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="editReview">我的短评</label>
                        <textarea id="editReview" class="form-control" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeEditModal()">取消</button>
                <button class="btn btn-primary" onclick="saveMovieEdit()">保存修改</button>
            </div>
        </div>
    </div>

    <script src="js/movie.js"></script>
</body>
</html>